!function(){function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return e(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return e(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function n(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}(self.webpackChunkaccounts=self.webpackChunkaccounts||[]).push([[878],{60878:function(e,a,i){"use strict";i.r(a),i.d(a,{TerminalReportModule:function(){return j}});var o=i(61116),l=i(33464),s=i(65724),u=i(35366),c=i(55959),d=i(31225),p=i(529),g=i(47727),m=i(44019),Z=i(42693),h=i(78035),f=function(){var e=function(){function e(t,a){r(this,e),this.http=t,this.errorService=a,this.BASE_API_URL=p.N.BASE_API_URL,this.barcodeReportRecords=[],this.terminalSaleRRecords=[],this.userData=JSON.parse(localStorage.getItem("user")),this.barcodeReportRecordsSubject=new c.xQ,this.terminalSaleRecordsSubject=new c.xQ}return n(e,[{key:"terminalListListener",value:function(){return this.barcodeReportRecordsSubject.asObservable()}},{key:"terminalSaleListListener",value:function(){return this.terminalSaleRecordsSubject.asObservable()}},{key:"getTerminalReport",value:function(e,r,a){var n=this;return this.http.post(this.BASE_API_URL+"/terminal/barcodeReport",{terminalId:e,startDate:r,endDate:a}).pipe((0,g.K)(this.handleError),(0,m.b)(function(e){e.data&&(n.barcodeReportRecords=e.data,n.barcodeReportRecordsSubject.next(t(n.barcodeReportRecords)))}))}},{key:"getTerminalSaleReport",value:function(e,r,a){var n=this;return this.http.post(this.BASE_API_URL+"/terminal/terminal_sale_reports",{terminalId:e,startDate:r,endDate:a}).pipe((0,g.K)(this.handleError),(0,m.b)(function(e){e.data&&(n.terminalSaleRRecords=e.data,n.terminalSaleRecordsSubject.next(t(n.terminalSaleRRecords)))}))}},{key:"serverError",value:function(t){return t instanceof Response?(0,d._)("backend server error"):(0,d._)(0===t.status?{status:t.status,message:"Backend Server is not Working",statusText:t.statusText}:401===t.status?{status:t.status,message:"Your are not authorised",statusText:t.statusText}:t)}},{key:"handleError",value:function(t){return t.error.message.includes("1062")?(0,d._)("Record already exists"):(0,d._)(t.error.message)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(Z.eN),u.LFG(h.T))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),T=i(57173),A=i(13070),b=i(9550),q=i(69024),S=i(31041),v=i(84369),y=i(59241);function _(t,e){if(1&t&&(u.TgZ(0,"tr"),u.TgZ(1,"td"),u._uU(2),u.qZA(),u.TgZ(3,"td"),u._uU(4),u.qZA(),u.TgZ(5,"td"),u._uU(6),u.qZA(),u.TgZ(7,"td"),u._uU(8),u.qZA(),u.TgZ(9,"td"),u._uU(10),u.qZA(),u.qZA()),2&t){var r=e.$implicit;u.xp6(2),u.Oqu(r.barcode_number),u.xp6(2),u.Oqu(r.draw_time),u.xp6(2),u.Oqu(r.total_quantity),u.xp6(2),u.Oqu(r.amount),u.xp6(2),u.Oqu(r.prize_value)}}function R(t,e){if(1&t&&(u.TgZ(0,"tr"),u.TgZ(1,"td"),u._uU(2),u.qZA(),u.TgZ(3,"td"),u._uU(4),u.qZA(),u.TgZ(5,"td"),u._uU(6),u.qZA(),u.TgZ(7,"td"),u._uU(8),u.qZA(),u.TgZ(9,"td"),u._uU(10),u.qZA(),u.TgZ(11,"td"),u._uU(12),u.qZA(),u.qZA()),2&t){var r=e.$implicit;u.xp6(2),u.Oqu(r.terminal_pin),u.xp6(2),u.Oqu(r.stokiest_name),u.xp6(2),u.Oqu(r.total),u.xp6(2),u.Oqu(r.commission),u.xp6(2),u.Oqu(r.prize_value),u.xp6(2),u.Oqu(r.ntp.toFixed(2))}}var D,U,x=[{path:"",canActivate:[s.v],component:(D=function(){function t(e,a){var n=this;r(this,t),this.renderer=e,this.terminalReportService=a,this.thisYear=(new Date).getFullYear(),this.thisMonth=(new Date).getMonth(),this.thisDay=(new Date).getDate(),this.startDate=new Date(this.thisYear,this.thisMonth,this.thisDay),this.StartDateFilter=this.startDate,this.EndDateFilter=this.startDate,this.pipe=new o.uU("en-US"),this.renderer.setStyle(document.body,"background-image","none"),this.terminalReportService.terminalListListener().subscribe(function(t){n.terminalReportData=t}),this.terminalReportService.terminalSaleListListener().subscribe(function(t){n.terminalSaleReportData=t}),this.getTerminalBarcodeReport(),this.getTerminalSaleReport()}return n(t,[{key:"getTerminalBarcodeReport",value:function(){var t=JSON.parse(localStorage.getItem("user")),e=this.pipe.transform(this.StartDateFilter,"yyyy-MM-dd"),r=this.pipe.transform(this.EndDateFilter,"yyyy-MM-dd");this.terminalReportService.getTerminalReport(t.userId,e,r).subscribe()}},{key:"getTerminalSaleReport",value:function(){var t=JSON.parse(localStorage.getItem("user")),e=this.pipe.transform(this.StartDateFilter,"yyyy-MM-dd"),r=this.pipe.transform(this.EndDateFilter,"yyyy-MM-dd");this.terminalReportService.getTerminalSaleReport(t.userId,e,r).subscribe()}},{key:"ngOnInit",value:function(){}}]),t}(),D.\u0275fac=function(t){return new(t||D)(u.Y36(u.Qsj),u.Y36(f))},D.\u0275cmp=u.Xpm({type:D,selectors:[["app-terminal-report"]],decls:76,vars:18,consts:[[1,"mt-2","mr-3","ml-3"],["label","Terminal barcode report"],[1,"pt-1","d-flex"],[1,"col-3"],["appearance","fill"],["matInput","",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],[3,"ngModel","ngModelChange"],["picker",""],["picker1",""],["mat-button","","color","accent",2,"font-size","20px",3,"click"],[1,""],["matSort","",1,"table","table-bordered","table-sm","m-3",2,"border","none !important","height","50px","overflow","scroll"],["mat-sort-header","terminal_pin"],["mat-sort-header","total"],["mat-sort-header","prize_value"],[4,"ngFor","ngForOf"],["label","Terminal sale report"],["matSort","",1,"table","table-bordered","table-sm",2,"border","none !important","height","50px","overflow","scroll"],["mat-sort-header","commission"],["mat-sort-header","ntp"]],template:function(t,e){if(1&t&&(u.TgZ(0,"mat-tab-group",0),u.TgZ(1,"mat-tab",1),u.TgZ(2,"div",2),u.TgZ(3,"div",3),u.TgZ(4,"mat-form-field",4),u.TgZ(5,"mat-label"),u._uU(6,"Start date"),u.qZA(),u.TgZ(7,"input",5),u.NdJ("ngModelChange",function(t){return e.StartDateFilter=t}),u.qZA(),u._UZ(8,"mat-datepicker-toggle",6),u.TgZ(9,"mat-datepicker",7,8),u.NdJ("ngModelChange",function(t){return e.StartDateFilter=t}),u.qZA(),u.qZA(),u.qZA(),u.TgZ(11,"div",3),u.TgZ(12,"mat-form-field",4),u.TgZ(13,"mat-label"),u._uU(14,"End date"),u.qZA(),u.TgZ(15,"input",5),u.NdJ("ngModelChange",function(t){return e.EndDateFilter=t}),u.qZA(),u._UZ(16,"mat-datepicker-toggle",6),u.TgZ(17,"mat-datepicker",7,9),u.NdJ("ngModelChange",function(t){return e.EndDateFilter=t}),u.qZA(),u.qZA(),u.qZA(),u.TgZ(19,"button",10),u.NdJ("click",function(){return e.getTerminalBarcodeReport()}),u._uU(20,"Search"),u.qZA(),u.qZA(),u.TgZ(21,"div",11),u.TgZ(22,"table",12),u.TgZ(23,"thead"),u.TgZ(24,"tr"),u.TgZ(25,"th",13),u._uU(26,"Baarcode"),u.qZA(),u.TgZ(27,"th",13),u._uU(28,"Draw Time"),u.qZA(),u.TgZ(29,"th",13),u._uU(30,"Quantity"),u.qZA(),u.TgZ(31,"th",14),u._uU(32,"Amount"),u.qZA(),u.TgZ(33,"th",15),u._uU(34,"Prize"),u.qZA(),u._UZ(35,"th"),u.qZA(),u.qZA(),u.TgZ(36,"tbody"),u.YNc(37,_,11,5,"tr",16),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(38,"mat-tab",17),u.TgZ(39,"div",2),u.TgZ(40,"div",3),u.TgZ(41,"mat-form-field",4),u.TgZ(42,"mat-label"),u._uU(43,"Start date"),u.qZA(),u.TgZ(44,"input",5),u.NdJ("ngModelChange",function(t){return e.StartDateFilter=t}),u.qZA(),u._UZ(45,"mat-datepicker-toggle",6),u.TgZ(46,"mat-datepicker",7,8),u.NdJ("ngModelChange",function(t){return e.StartDateFilter=t}),u.qZA(),u.qZA(),u.qZA(),u.TgZ(48,"div",3),u.TgZ(49,"mat-form-field",4),u.TgZ(50,"mat-label"),u._uU(51,"End date"),u.qZA(),u.TgZ(52,"input",5),u.NdJ("ngModelChange",function(t){return e.EndDateFilter=t}),u.qZA(),u._UZ(53,"mat-datepicker-toggle",6),u.TgZ(54,"mat-datepicker",7,9),u.NdJ("ngModelChange",function(t){return e.EndDateFilter=t}),u.qZA(),u.qZA(),u.qZA(),u.TgZ(56,"button",10),u.NdJ("click",function(){return e.getTerminalSaleReport()}),u._uU(57,"Search"),u.qZA(),u.qZA(),u.TgZ(58,"table",18),u.TgZ(59,"thead"),u.TgZ(60,"tr"),u.TgZ(61,"th",13),u._uU(62,"Terminal Id"),u.qZA(),u.TgZ(63,"th",13),u._uU(64,"Stokiest Name"),u.qZA(),u.TgZ(65,"th",14),u._uU(66,"Total"),u.qZA(),u.TgZ(67,"th",19),u._uU(68,"Commission"),u.qZA(),u.TgZ(69,"th",15),u._uU(70,"Prize"),u.qZA(),u.TgZ(71,"th",20),u._uU(72,"NTP"),u.qZA(),u._UZ(73,"th"),u.qZA(),u.qZA(),u.TgZ(74,"tbody"),u.YNc(75,R,13,6,"tr",16),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t){var r=u.MAs(10),a=u.MAs(18);u.xp6(7),u.Q6J("matDatepicker",r)("ngModel",e.StartDateFilter),u.xp6(1),u.Q6J("for",r),u.xp6(1),u.Q6J("ngModel",e.StartDateFilter),u.xp6(6),u.Q6J("matDatepicker",a)("ngModel",e.EndDateFilter),u.xp6(1),u.Q6J("for",a),u.xp6(1),u.Q6J("ngModel",e.EndDateFilter),u.xp6(20),u.Q6J("ngForOf",e.terminalReportData),u.xp6(7),u.Q6J("matDatepicker",r)("ngModel",e.StartDateFilter),u.xp6(1),u.Q6J("for",r),u.xp6(1),u.Q6J("ngModel",e.StartDateFilter),u.xp6(6),u.Q6J("matDatepicker",a)("ngModel",e.EndDateFilter),u.xp6(1),u.Q6J("for",a),u.xp6(1),u.Q6J("ngModel",e.EndDateFilter),u.xp6(21),u.Q6J("ngForOf",e.terminalSaleReportData)}},directives:[T.SP,T.uX,A.KE,A.hX,b.Nt,q.hl,S.Fj,S.JJ,S.On,q.nW,A.R9,q.Mq,v.lW,y.YE,y.nU,o.sg],styles:[""]}),D)}],k=function(){var t=function t(){r(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[l.Bz.forChild(x)],l.Bz]}),t}(),M=i(52030),F=i(1887),J=i(77154),E=i(22797),O=i(79572),w=i(97624),N=i(48158),Q=i(4333),I=i(47217),C=i(87064),j=((U=function t(){r(this,t)}).\u0275fac=function(t){return new(t||U)},U.\u0275mod=u.oAB({type:U}),U.\u0275inj=u.cJS({imports:[[o.ez,k,o.ez,M.q,T.Nh,F.q,J.o9,E.QW,S.u5,S.UX,O.rP,y.JX,w.aE,w.bz,N.At,Q.UU,I.g,q.FA,b.c,S.u5,C.XK,C.si]]}),U)}}])}();