(self.webpackChunkaccounts=self.webpackChunkaccounts||[]).push([[373],{45480:function(t,e,r){"use strict";r.d(e,{q:function(){return n}});var i=r(51095),o=r(49983),s=r(37716);let n=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[i.ot,o.c]}),t})()},81373:function(t,e,r){"use strict";r.r(e),r.d(e,{MasterSuperStockistModule:function(){return J}});var i=r(38583),o=r(63423),s=r(3679),n=r(88259),a=r.n(n),c=r(37716),u=r(44501),l=r(73535),m=r(65939),p=r(93738),d=r(35618),Z=r(98295),g=r(49983),S=r(51095),f=r(11494),h=r(67441),k=r(76627),A=r(88030),q=r(72458);function x(t,e){1&t&&(c.TgZ(0,"mat-error"),c._uU(1,"This field is Required"),c.qZA())}function T(t,e){if(1&t&&(c.TgZ(0,"mat-error"),c._uU(1),c.qZA()),2&t){const t=c.oxw(2);c.xp6(1),c.hij("Minimum length of name is ",t.superStockistMasterForm.get("userName").errors.minlength.requiredLength,"")}}function b(t,e){if(1&t&&(c.TgZ(0,"div",35),c.YNc(1,x,2,0,"mat-error",36),c.YNc(2,T,2,1,"mat-error",36),c.qZA()),2&t){const t=c.oxw();c.xp6(1),c.Q6J("ngIf",t.superStockistMasterForm.get("userName").errors.required),c.xp6(1),c.Q6J("ngIf",t.superStockistMasterForm.get("userName").errors.minlength)}}function v(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"tr",37),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.TgZ(7,"td"),c._uU(8),c.qZA(),c.TgZ(9,"td"),c.TgZ(10,"i",38),c.NdJ("click",function(){const e=c.CHM(t).$implicit;return c.oxw().editStockist(e)}),c.qZA(),c.qZA(),c.qZA()}if(2&t){const t=e.$implicit,r=e.index,i=c.oxw();c.Q6J("ngStyle",i.getBackgroundColor(r)),c.xp6(2),c.Oqu(r+1),c.xp6(2),c.Oqu(t.userName),c.xp6(2),c.Oqu(t.pin),c.xp6(2),c.Oqu(t.balance)}}function U(t,e){if(1&t&&(c.TgZ(0,"mat-option",39),c._uU(1),c.qZA()),2&t){const t=e.$implicit;c.Q6J("value",t.userId),c.xp6(1),c.hij(" ",t.pin," ")}}function N(t,e){if(1&t&&(c.TgZ(0,"mat-form-field",40),c.TgZ(1,"mat-label"),c._uU(2,"Name"),c.qZA(),c._UZ(3,"input",41),c.TgZ(4,"mat-icon",33),c._uU(5,"person_pin"),c.qZA(),c.qZA()),2&t){const t=c.oxw();c.xp6(3),c.Q6J("value",t.selectedSuperStockist.userName)}}function I(t,e){if(1&t&&(c.TgZ(0,"mat-form-field",40),c.TgZ(1,"mat-label"),c._uU(2,"Current balance"),c.qZA(),c._UZ(3,"input",42),c.TgZ(4,"mat-icon",33),c._uU(5,"account_balance_wallet"),c.qZA(),c.qZA()),2&t){const t=c.oxw();c.xp6(3),c.Q6J("value",t.selectedSuperStockist.balance)}}let w=(()=>{class t{constructor(t,e){this.masterSuperStockistService=t,this.authService=e,this.isSuperStockistUpdateAble=!1,this.isPinAvailable=!1,this.superStockist=[],this.selectedSuperStockist=null,this.highLightedRowIndex=-1,this.user=this.authService.userBehaviorSubject.value}ngOnInit(){this.superStockistMasterForm=new s.cw({id:new s.NI(null),userName:new s.NI(null,[s.kI.required,s.kI.minLength(2)]),pin:new s.NI(null),commission:new s.NI(null,[s.kI.required,s.kI.max(100)])}),this.superStockistLimitForm=new s.cw({beneficiaryUid:new s.NI(null,[s.kI.required]),amount:new s.NI(null,[s.kI.required,s.kI.minLength(2)])}),this.superStockist=this.masterSuperStockistService.getSuperStockist(),this.masterSuperStockistService.getSuperStockistListener().subscribe(t=>{this.superStockist=t})}getBackgroundColor(t){if(t==this.highLightedRowIndex)return{"background-color":"rgb(103 245 166 / 60%)",animation:"blinking 1s infinite"}}onSuperStockistSelect(t){this.selectedSuperStockist=this.superStockist.find(e=>e.userId===t.value)}clearMasterSuperStockistForm(){this.superStockistMasterForm.reset(),this.highLightedRowIndex=-1,this.isSuperStockistUpdateAble=!1}updateSuperStockist(){this.masterSuperStockistService.updateSuperStockist({id:this.superStockistMasterForm.value.id,userName:this.superStockistMasterForm.value.userName,pin:this.superStockistMasterForm.value.pin}).subscribe(t=>{1===t.success&&(a().fire({position:"top-end",icon:"success",title:"Super Stockist Updated",showConfirmButton:!1,timer:1e3}),this.superStockistMasterForm.reset())})}rechargeToSuperStockist(){a().fire({title:"Confirmation",text:"Do you sure to recharge?",icon:"info",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, recharge It!"}).then(t=>{t.isConfirmed&&this.masterSuperStockistService.saveSuperStockistBalance({beneficiaryUid:this.superStockistLimitForm.value.beneficiaryUid,amount:this.superStockistLimitForm.value.amount,rechargeDoneByUid:this.user.userId}).subscribe(t=>{if(1===t.success){const e=t.data,r=this.superStockist.findIndex(t=>t.userId===e.userId);this.superStockist[r].balance=e.balance,setTimeout(()=>{this.highLightedRowIndex=-1},1e4),a().fire({position:"top-end",icon:"success",title:"Recharge done",showConfirmButton:!1,timer:1e3})}else a().fire({position:"top-end",icon:"error",title:"Validation error",showConfirmButton:!1,timer:3e3})},t=>{console.log("data saving error",t)})})}editStockist(t){const e=this.superStockist.findIndex(e=>e.userId===t.userId);this.highLightedRowIndex=e,this.superStockistMasterForm.patchValue({id:t.userId,userName:t.userName,pin:t.pin}),this.isSuperStockistUpdateAble=!0}pinCheck(){this.masterSuperStockistService.checkPinAvailability(this.superStockistMasterForm.value.pin).subscribe(t=>{0===t.success&&(a().fire({position:"top-end",icon:"error",title:"Pin Not Available",showConfirmButton:!1,timer:1e3}),this.isPinAvailable=!0)})}createNewSuperStockist(){a().fire({title:"Confirmation",text:"Do you sure to create stockist?",icon:"info",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, create It!"}).then(t=>{t.isConfirmed&&this.masterSuperStockistService.saveNewSuperStockist({userName:this.superStockistMasterForm.value.userName,pin:this.superStockistMasterForm.value.pin,commission:this.superStockistMasterForm.value.commission}).subscribe(t=>{1===t.success?(this.superStockistMasterForm.reset(),a().fire({position:"top-end",icon:"success",title:"Super Stockist created",showConfirmButton:!1,timer:1e3})):a().fire({position:"top-end",icon:"error",title:"Validation error",showConfirmButton:!1,timer:3e3})},t=>{console.log("data saving error",t)})})}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(u.Z),c.Y36(l.e))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-master-super-stockist"]],decls:89,vars:10,consts:[["label","Create super stockist"],[1,"d-flex","flex-row","mt-2"],[1,"col-4"],["mat-card-avatar","",1,"example-header-image"],["fxLayout","row","fxLayout.xs","column","fxLayoutAlign","start","fxLayoutGap","10px","fxLayoutGap.xs","0",1,"container"],["fxFlex","100"],[3,"formGroup"],["type","text","matInput","","formControlName","userName","placeholder","Enter name"],["class","container","fxLayout","","fxLayout.xs","column","fxLayoutAlign","end","fxLayoutGap","10px","fxLayoutGap.xs","0",4,"ngIf"],["type","text","matInput","","formControlName","pin","placeholder","Enter name",3,"blur"],[1,"col-10","m-0","p-0"],["fxFlex","col 100"],["type","text","matInput","","formControlName","commission","placeholder","Commission"],[2,"color","red"],["mat-raised-button","","color","primary","mat-stroked-button","",1,"pull-right",3,"disabled","click"],["mat-raised-button","","color","warn","mat-stroked-button","",1,"pull-right",3,"click"],[1,"col-8",2,"background-color","#6c757d5e"],["matSort","",1,"table","table-bordered","table-sm",2,"border","none !important"],["scope","colgroup","colspan","5",1,"text-center"],["mat-sort-header","userName"],["mat-sort-header","pin"],["mat-sort-header","balance"],["mat-sort-header","edit"],[3,"ngStyle",4,"ngFor","ngForOf"],["label","Super Stockist limit"],[1,"col-2"],[1,"col-8"],["fxFlex","25"],["formControlName","beneficiaryUid",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["appearance","legacy",4,"ngIf"],["fxFlex","100",1,"d-flex"],["type","text","matInput","","formControlName","amount","placeholder","Enter amount"],["matSuffix",""],["mat-raised-button","","color","warn","mat-stroked-button","",1,"pull-right",3,"disabled","click"],["fxLayout","","fxLayout.xs","column","fxLayoutAlign","end","fxLayoutGap","10px","fxLayoutGap.xs","0",1,"container"],[4,"ngIf"],[3,"ngStyle"],[1,"bi","bi-pencil-square",3,"click"],[3,"value"],["appearance","legacy"],["type","text","matInput","","readonly","","placeholder","Stockist",3,"value"],["type","text","readonly","","matInput","","placeholder","Current balance",3,"value"]],template:function(t,e){1&t&&(c.TgZ(0,"mat-tab-group"),c.TgZ(1,"mat-tab",0),c.TgZ(2,"div",1),c.TgZ(3,"div",2),c.TgZ(4,"mat-card"),c.TgZ(5,"mat-card-header"),c._UZ(6,"div",3),c.TgZ(7,"mat-card-title"),c._uU(8,"New Super Stockist Form"),c.qZA(),c.qZA(),c.TgZ(9,"mat-card-content"),c.TgZ(10,"div",4),c.TgZ(11,"div",5),c.TgZ(12,"form",6),c.TgZ(13,"div",4),c.TgZ(14,"mat-form-field",5),c.TgZ(15,"mat-label"),c._uU(16,"Super Stockist Name"),c.qZA(),c._UZ(17,"input",7),c.YNc(18,b,3,2,"div",8),c.qZA(),c.TgZ(19,"mat-form-field",5),c.TgZ(20,"mat-label"),c._uU(21,"PIN"),c.qZA(),c.TgZ(22,"input",9),c.NdJ("blur",function(){return e.pinCheck()}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(23,"div",4),c.TgZ(24,"div",10),c.TgZ(25,"mat-form-field",11),c.TgZ(26,"mat-label"),c._uU(27,"Commission"),c.qZA(),c._UZ(28,"input",12),c.qZA(),c.qZA(),c.TgZ(29,"label",13),c._uU(30,"(Max: 100)"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(31,"div",4),c.TgZ(32,"button",14),c.NdJ("click",function(){return e.createNewSuperStockist()}),c._uU(33,"Create"),c.qZA(),c.TgZ(34,"button",14),c.NdJ("click",function(){return e.updateSuperStockist()}),c._uU(35,"Update"),c.qZA(),c.TgZ(36,"button",15),c.NdJ("click",function(){return e.clearMasterSuperStockistForm()}),c._uU(37,"clear"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(38,"div",16),c.TgZ(39,"table",17),c.TgZ(40,"thead"),c.TgZ(41,"tr"),c.TgZ(42,"th",18),c._uU(43,"Stockist List"),c.qZA(),c.qZA(),c.TgZ(44,"tr"),c.TgZ(45,"th"),c._uU(46,"Id"),c.qZA(),c.TgZ(47,"th",19),c._uU(48,"Stockist name"),c.qZA(),c.TgZ(49,"th",20),c._uU(50,"Pin"),c.qZA(),c.TgZ(51,"th",21),c._uU(52,"Balance"),c.qZA(),c.TgZ(53,"th",22),c._uU(54,"Edit"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(55,"tbody"),c.YNc(56,v,11,5,"tr",23),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(57,"mat-tab",24),c.TgZ(58,"div",1),c._UZ(59,"div",25),c.TgZ(60,"div",26),c.TgZ(61,"mat-card"),c.TgZ(62,"mat-card-header"),c._UZ(63,"div",3),c.TgZ(64,"mat-card-title"),c._uU(65,"Recharge Super Stockist"),c.qZA(),c.qZA(),c.TgZ(66,"mat-card-content"),c.TgZ(67,"div",4),c.TgZ(68,"div",27),c.TgZ(69,"form",6),c.TgZ(70,"div",4),c.TgZ(71,"mat-form-field",5),c.TgZ(72,"mat-label"),c._uU(73,"Super Stockist"),c.qZA(),c.TgZ(74,"mat-select",28),c.NdJ("selectionChange",function(t){return e.onSuperStockistSelect(t)}),c.YNc(75,U,2,2,"mat-option",29),c.qZA(),c.qZA(),c.YNc(76,N,6,1,"mat-form-field",30),c.YNc(77,I,6,1,"mat-form-field",30),c.qZA(),c.TgZ(78,"div",4),c.TgZ(79,"mat-form-field",31),c.TgZ(80,"mat-label"),c._uU(81,"Recharge amount"),c.qZA(),c._UZ(82,"input",32),c.TgZ(83,"mat-icon",33),c._uU(84," money"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(85,"div",4),c.TgZ(86,"button",34),c.NdJ("click",function(){return e.rechargeToSuperStockist()}),c._uU(87,"Save"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c._UZ(88,"div",25),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(12),c.Q6J("formGroup",e.superStockistMasterForm),c.xp6(6),c.Q6J("ngIf",!e.superStockistMasterForm.get("userName").valid&&e.superStockistMasterForm.get("userName").touched),c.xp6(14),c.Q6J("disabled",!e.superStockistMasterForm.valid||e.isSuperStockistUpdateAble||e.isPinAvailable),c.xp6(2),c.Q6J("disabled",!e.isSuperStockistUpdateAble),c.xp6(22),c.Q6J("ngForOf",e.superStockist),c.xp6(13),c.Q6J("formGroup",e.superStockistLimitForm),c.xp6(6),c.Q6J("ngForOf",e.superStockist),c.xp6(1),c.Q6J("ngIf",e.selectedSuperStockist),c.xp6(1),c.Q6J("ngIf",e.selectedSuperStockist),c.xp6(9),c.Q6J("disabled",!e.superStockistLimitForm.valid))},directives:[m.SP,m.uX,p.a8,p.dk,p.kc,p.n5,p.dn,d.xw,d.Wh,d.SQ,d.yH,s._Y,s.JL,s.sg,Z.KE,Z.hX,g.Nt,s.Fj,s.JJ,s.u,i.O5,S.lW,f.YE,f.nU,i.sg,h.gD,k.Hw,Z.R9,Z.TO,i.PC,A.Zl,q.ey],styles:[""]}),t})();const y=[{path:"",canActivate:[r(51068).m],component:w}];let _=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[o.Bz.forChild(y)],o.Bz]}),t})();var F=r(45480),C=r(15566),L=r(45396);let J=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[i.ez,_,m.Nh,F.q,C.o9,p.QW,s.u5,s.UX,L.rP,f.JX,h.LD,k.Ps]]}),t})()},51068:function(t,e,r){"use strict";r.d(e,{m:function(){return s}});var i=r(37716),o=r(73535);let s=(()=>{class t{constructor(t){this.authService=t}canActivate(t,e){return this.authService.isAdmin()}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(o.e))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);