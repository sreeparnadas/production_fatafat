!function(){function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return e(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}(self.webpackChunkaccounts=self.webpackChunkaccounts||[]).push([[166],{7166:function(e,n,a){"use strict";a.r(n),a.d(n,{MasterTerminalModule:function(){return R}});var o=a(61116),s=a(33464),l=a(58423),c=a(529),u=a(31041),m=a(22501),f=a.n(m),d=a(35366),g=a(55959),h=a(47727),Z=a(44019),p=a(42693),T=a(78035),v=function(){var e=function(){function e(n,i){var a=this;r(this,e),this.http=n,this.errorService=i,this.BASE_API_URL=c.N.BASE_API_URL,this.terminals=[],this.terminalSubject=new g.xQ,this.http.get(this.BASE_API_URL+"/terminals").subscribe(function(e){a.terminals=e.data,a.terminalSubject.next(t(a.terminals))})}return i(e,[{key:"getTerminals",value:function(){return t(this.terminals)}},{key:"getTerminalListener",value:function(){return this.terminalSubject.asObservable()}},{key:"saveNewTerminal",value:function(t){return this.http.post(this.BASE_API_URL+"/terminals",t).pipe((0,h.K)(this.errorService.serverError),(0,Z.b)(function(t){}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.LFG(p.eN),d.LFG(T.T))},e.\u0275prov=d.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),A=a(82859),x=a(57173),q=a(22797),b=a(35965),y=a(13070),k=a(9550),w=a(13841),N=a(84369),L=a(59241),S=a(87064),I=a(41293),_=a(79572);function U(t,e){1&t&&(d.TgZ(0,"mat-error"),d._uU(1,"This field is Required"),d.qZA())}function F(t,e){if(1&t&&(d.TgZ(0,"mat-error"),d._uU(1),d.qZA()),2&t){var r=d.oxw(2);d.xp6(1),d.hij("Minimum length of name is ",r.terminalMasterForm.get("terminalName").errors.minlength.requiredLength,"")}}function C(t,e){if(1&t&&(d.TgZ(0,"div",23),d.YNc(1,U,2,0,"mat-error",24),d.YNc(2,F,2,1,"mat-error",24),d.qZA()),2&t){var r=d.oxw();d.xp6(1),d.Q6J("ngIf",r.terminalMasterForm.get("terminalName").errors.required),d.xp6(1),d.Q6J("ngIf",r.terminalMasterForm.get("terminalName").errors.minlength)}}function J(t,e){if(1&t&&(d.TgZ(0,"mat-option",25),d._uU(1),d.qZA()),2&t){var r=e.$implicit;d.Q6J("value",r.userId),d.xp6(1),d.hij(" ",r.userName," ")}}function M(t,e){if(1&t&&(d.TgZ(0,"tr",26),d.TgZ(1,"td"),d._uU(2),d.qZA(),d.TgZ(3,"td"),d._uU(4),d.qZA(),d.TgZ(5,"td"),d._uU(6),d.qZA(),d.TgZ(7,"td"),d._uU(8),d.qZA(),d.TgZ(9,"td"),d._uU(10),d.qZA(),d.qZA()),2&t){var r=e.$implicit,n=e.index,i=d.oxw();d.Q6J("ngStyle",i.getBackgroundColor(n)),d.xp6(2),d.Oqu(n+1),d.xp6(2),d.Oqu(r.terminalName),d.xp6(2),d.Oqu(r.pin),d.xp6(2),d.Oqu(r.balance),d.xp6(2),d.Oqu(r.stockist.userName)}}function B(t,e){if(1&t){var r=d.EpF();d.TgZ(0,"div",27),d.TgZ(1,"div",28),d.TgZ(2,"mat-slide-toggle",29),d.NdJ("change",function(){d.CHM(r);var t=d.oxw();return t.showDevArea=!t.showDevArea}),d._uU(3),d.qZA(),d.qZA(),d.qZA()}if(2&t){var n=d.oxw();d.xp6(3),d.Oqu(n.showDevArea?"Hide Developer Area":"Show Developer Area")}}function O(t,e){if(1&t&&(d.TgZ(0,"div",27),d.TgZ(1,"div",30),d.TgZ(2,"pre"),d._uU(3),d.ALo(4,"json"),d.qZA(),d.qZA(),d.TgZ(5,"div",28),d.TgZ(6,"pre"),d._uU(7),d.ALo(8,"json"),d.qZA(),d.qZA(),d._UZ(9,"div",28),d.qZA()),2&t){var r=d.oxw();d.xp6(3),d.hij("\n      terminals = ",d.lcZ(4,2,r.terminals),"\n      "),d.xp6(4),d.hij("sortedTerminalList = ",d.lcZ(8,4,r.sortedTerminalList),"")}}function j(t,e,r){return(t<e?-1:1)*(r?1:-1)}var Q,D,Y=[{path:"",canActivate:[l.m],component:(Q=function(){function t(e,n){r(this,t),this.masterTerminalService=e,this.masterStockistService=n,this.isProduction=c.N.production,this.showDevArea=!1,this.terminals=[],this.sortedTerminalList=[],this.stockists=[],this.highLightedRowIndex=-1,this.terminalMasterForm=new u.cw({id:new u.NI(null),terminalName:new u.NI(null,[u.kI.required,u.kI.minLength(2)]),stockistId:new u.NI(null,[u.kI.required])})}return i(t,[{key:"ngOnInit",value:function(){var t=this;this.terminals=this.masterTerminalService.getTerminals(),this.sortedTerminalList=this.masterTerminalService.getTerminals(),this.masterTerminalService.getTerminalListener().subscribe(function(e){t.terminals=e,t.sortedTerminalList=e}),this.stockists=this.masterStockistService.getStockists(),this.masterStockistService.getStockistListener().subscribe(function(e){t.stockists=e})}},{key:"createNewTerminal",value:function(){var t=this;f().fire({title:"Confirmation",text:"Do you sure to create terminal?",icon:"info",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, create It!"}).then(function(e){e.isConfirmed&&t.masterTerminalService.saveNewTerminal({terminalName:t.terminalMasterForm.value.terminalName,stockistId:t.terminalMasterForm.value.stockistId}).subscribe(function(e){if(1===e.success){var r=e.data;t.terminals.unshift(r),t.sortedTerminalList.unshift(r),t.highLightedRowIndex=0,t.terminalMasterForm.reset(),setTimeout(function(){t.highLightedRowIndex=-1},1e4),f().fire({position:"top-end",icon:"success",title:"Terminal created",showConfirmButton:!1,timer:1e3})}else f().fire({position:"top-end",icon:"error",title:"Validation error",showConfirmButton:!1,timer:3e3})},function(t){console.log("data saving error",t)})})}},{key:"getBackgroundColor",value:function(t){if(t==this.highLightedRowIndex)return{"background-color":"rgb(103 245 166 / 60%)",animation:"blinking 1s infinite"}}},{key:"clearMasterTerminalForm",value:function(){this.terminalMasterForm.reset()}},{key:"sortData",value:function(t){var e=this.terminals.slice();this.sortedTerminalList=t.active&&""!==t.direction?e.sort(function(e,r){var n="asc"===t.direction;switch(t.active){case"terminalName":return j(e.terminalName,r.terminalName,n);case"stockistName":return j(e.stockist.userName,r.stockist.userName,n);case"balance":return j(e.balance,r.balance,n);default:return 0}}):e}}]),t}(),Q.\u0275fac=function(t){return new(t||Q)(d.Y36(v),d.Y36(A.E))},Q.\u0275cmp=d.Xpm({type:Q,selectors:[["app-master-terminal"]],decls:52,vars:7,consts:[["label","Create terminal"],[1,"d-flex","flex-row","mt-2"],[1,"col-4"],["mat-card-avatar","",1,"example-header-image"],["fxLayout","row","fxLayout.xs","column","fxLayoutAlign","start","fxLayoutGap","10px","fxLayoutGap.xs","0",1,"container"],["fxFlex","100"],[3,"formGroup"],["type","text","matInput","","formControlName","terminalName","placeholder","Enter name"],["class","container","fxLayout","","fxLayout.xs","column","fxLayoutAlign","end","fxLayoutGap","10px","fxLayoutGap.xs","0",4,"ngIf"],["formControlName","stockistId"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary","mat-stroked-button","",1,"pull-right",3,"disabled","click"],["mat-raised-button","","color","warn","mat-stroked-button","",1,"pull-right",3,"click"],[1,"col-8",2,"background-color","#6c757d5e"],["matSort","",1,"table","table-bordered","table-sm",2,"border","none !important",3,"matSortChange"],["scope","colgroup","colspan","4",1,"text-center"],["mat-sort-header","terminalName"],["mat-sort-header","pin"],["mat-sort-header","balance"],["mat-sort-header","stockistName"],[3,"ngStyle",4,"ngFor","ngForOf"],["label","Terminal limit"],["class","d-flex",4,"ngIf"],["fxLayout","","fxLayout.xs","column","fxLayoutAlign","end","fxLayoutGap","10px","fxLayoutGap.xs","0",1,"container"],[4,"ngIf"],[3,"value"],[3,"ngStyle"],[1,"d-flex"],[1,"col-3"],[3,"change"],[1,"col-6"]],template:function(t,e){1&t&&(d.TgZ(0,"mat-tab-group"),d.TgZ(1,"mat-tab",0),d.TgZ(2,"div",1),d.TgZ(3,"div",2),d.TgZ(4,"mat-card"),d.TgZ(5,"mat-card-header"),d._UZ(6,"div",3),d.TgZ(7,"mat-card-title"),d._uU(8,"New Terminal Form"),d.qZA(),d.qZA(),d.TgZ(9,"mat-card-content"),d.TgZ(10,"div",4),d.TgZ(11,"div",5),d.TgZ(12,"form",6),d.TgZ(13,"div",4),d.TgZ(14,"mat-form-field",5),d.TgZ(15,"mat-label"),d._uU(16,"Terminal Name"),d.qZA(),d._UZ(17,"input",7),d.YNc(18,C,3,2,"div",8),d.qZA(),d.qZA(),d.TgZ(19,"div",4),d.TgZ(20,"mat-form-field",5),d.TgZ(21,"mat-label"),d._uU(22,"Stockist"),d.qZA(),d.TgZ(23,"mat-select",9),d.YNc(24,J,2,2,"mat-option",10),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(25,"div",4),d.TgZ(26,"button",11),d.NdJ("click",function(){return e.createNewTerminal()}),d._uU(27,"Create"),d.qZA(),d.TgZ(28,"button",12),d.NdJ("click",function(){return e.clearMasterTerminalForm()}),d._uU(29,"clear"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(30,"div",13),d.TgZ(31,"table",14),d.NdJ("matSortChange",function(t){return e.sortData(t)}),d.TgZ(32,"thead"),d.TgZ(33,"tr"),d.TgZ(34,"th",15),d._uU(35,"Terminal List"),d.qZA(),d.qZA(),d.TgZ(36,"tr"),d.TgZ(37,"th"),d._uU(38,"Id"),d.qZA(),d.TgZ(39,"th",16),d._uU(40,"Terminal name"),d.qZA(),d.TgZ(41,"th",17),d._uU(42,"Pin"),d.qZA(),d.TgZ(43,"th",18),d._uU(44,"Balance"),d.qZA(),d.TgZ(45,"th",19),d._uU(46,"Stockist"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(47,"tbody"),d.YNc(48,M,11,6,"tr",20),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d._UZ(49,"mat-tab",21),d.qZA(),d.YNc(50,B,4,1,"div",22),d.YNc(51,O,10,6,"div",22)),2&t&&(d.xp6(12),d.Q6J("formGroup",e.terminalMasterForm),d.xp6(6),d.Q6J("ngIf",!e.terminalMasterForm.get("terminalName").valid&&e.terminalMasterForm.get("terminalName").touched),d.xp6(6),d.Q6J("ngForOf",e.stockists),d.xp6(2),d.Q6J("disabled",!e.terminalMasterForm.valid),d.xp6(22),d.Q6J("ngForOf",e.sortedTerminalList),d.xp6(2),d.Q6J("ngIf",!e.isProduction),d.xp6(1),d.Q6J("ngIf",!e.isProduction&&e.showDevArea))},directives:[x.SP,x.uX,q.a8,q.dk,q.kc,q.n5,q.dn,b.xw,b.Wh,b.SQ,b.yH,u._Y,u.JL,u.sg,y.KE,y.hX,k.Nt,u.Fj,u.JJ,u.u,o.O5,w.gD,o.sg,N.lW,L.YE,L.nU,y.TO,S.ey,o.PC,I.Zl,_.Rr],pipes:[o.Ts],styles:[""]}),Q),data:{title:"About",description:"Description Meta Tag Content",ogUrl:"your og url"}}],E=function(){var t=function t(){r(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({imports:[[s.Bz.forChild(Y)],s.Bz]}),t}(),P=a(1887),G=a(77154),R=((D=function t(){r(this,t)}).\u0275fac=function(t){return new(t||D)},D.\u0275mod=d.oAB({type:D}),D.\u0275inj=d.cJS({imports:[[o.ez,E,x.Nh,P.q,G.o9,q.QW,u.u5,u.UX,_.rP,L.JX,w.LD]]}),D)}}])}();