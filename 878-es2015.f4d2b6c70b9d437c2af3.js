(self.webpackChunkaccounts=self.webpackChunkaccounts||[]).push([[878],{60878:function(t,e,r){"use strict";r.r(e),r.d(e,{TerminalReportModule:function(){return O}});var a=r(61116),i=r(33464),n=r(65724),o=r(35366),s=r(55959),l=r(31225),d=r(529),u=r(47727),c=r(44019),g=r(42693),p=r(78035);let Z=(()=>{class t{constructor(t,e){this.http=t,this.errorService=e,this.BASE_API_URL=d.N.BASE_API_URL,this.barcodeReportRecords=[],this.terminalSaleRRecords=[],this.userData=JSON.parse(localStorage.getItem("user")),this.barcodeReportRecordsSubject=new s.xQ,this.terminalSaleRecordsSubject=new s.xQ}terminalListListener(){return this.barcodeReportRecordsSubject.asObservable()}terminalSaleListListener(){return this.terminalSaleRecordsSubject.asObservable()}getTerminalReport(t,e,r){return this.http.post(this.BASE_API_URL+"/terminal/barcodeReport",{terminalId:t,startDate:e,endDate:r}).pipe((0,u.K)(this.handleError),(0,c.b)(t=>{t.data&&(this.barcodeReportRecords=t.data,this.barcodeReportRecordsSubject.next([...this.barcodeReportRecords]))}))}getTerminalSaleReport(t,e,r){return this.http.post(this.BASE_API_URL+"/terminal/terminal_sale_reports",{terminalId:t,startDate:e,endDate:r}).pipe((0,u.K)(this.handleError),(0,c.b)(t=>{t.data&&(this.terminalSaleRRecords=t.data,this.terminalSaleRecordsSubject.next([...this.terminalSaleRRecords]))}))}serverError(t){return t instanceof Response?(0,l._)("backend server error"):(0,l._)(0===t.status?{status:t.status,message:"Backend Server is not Working",statusText:t.statusText}:401===t.status?{status:t.status,message:"Your are not authorised",statusText:t.statusText}:t)}handleError(t){return t.error.message.includes("1062")?(0,l._)("Record already exists"):(0,l._)(t.error.message)}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(g.eN),o.LFG(p.T))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var m=r(57173),h=r(13070),T=r(9550),A=r(69024),q=r(31041),b=r(84369),S=r(59241);function f(t,e){if(1&t&&(o.TgZ(0,"tr"),o.TgZ(1,"td"),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.qZA(),o.TgZ(5,"td"),o._uU(6),o.qZA(),o.TgZ(7,"td"),o._uU(8),o.qZA(),o.TgZ(9,"td"),o._uU(10),o.qZA(),o.qZA()),2&t){const t=e.$implicit;o.xp6(2),o.Oqu(t.barcode_number),o.xp6(2),o.Oqu(t.draw_time),o.xp6(2),o.Oqu(t.total_quantity),o.xp6(2),o.Oqu(t.amount),o.xp6(2),o.Oqu(t.prize_value)}}function _(t,e){if(1&t&&(o.TgZ(0,"tr"),o.TgZ(1,"td"),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.qZA(),o.TgZ(5,"td"),o._uU(6),o.qZA(),o.TgZ(7,"td"),o._uU(8),o.qZA(),o.TgZ(9,"td"),o._uU(10),o.qZA(),o.TgZ(11,"td"),o._uU(12),o.qZA(),o.qZA()),2&t){const t=e.$implicit;o.xp6(2),o.Oqu(t.terminal_pin),o.xp6(2),o.Oqu(t.stokiest_name),o.xp6(2),o.Oqu(t.total),o.xp6(2),o.Oqu(t.commission),o.xp6(2),o.Oqu(t.prize_value),o.xp6(2),o.Oqu(t.ntp.toFixed(2))}}const R=[{path:"",canActivate:[n.v],component:(()=>{class t{constructor(t,e){this.renderer=t,this.terminalReportService=e,this.thisYear=(new Date).getFullYear(),this.thisMonth=(new Date).getMonth(),this.thisDay=(new Date).getDate(),this.startDate=new Date(this.thisYear,this.thisMonth,this.thisDay),this.StartDateFilter=this.startDate,this.EndDateFilter=this.startDate,this.pipe=new a.uU("en-US"),this.renderer.setStyle(document.body,"background-image","none"),this.terminalReportService.terminalListListener().subscribe(t=>{this.terminalReportData=t}),this.terminalReportService.terminalSaleListListener().subscribe(t=>{this.terminalSaleReportData=t}),this.getTerminalBarcodeReport(),this.getTerminalSaleReport()}getTerminalBarcodeReport(){const t=JSON.parse(localStorage.getItem("user"));var e=this.pipe.transform(this.StartDateFilter,"yyyy-MM-dd"),r=this.pipe.transform(this.EndDateFilter,"yyyy-MM-dd");this.terminalReportService.getTerminalReport(t.userId,e,r).subscribe()}getTerminalSaleReport(){const t=JSON.parse(localStorage.getItem("user"));var e=this.pipe.transform(this.StartDateFilter,"yyyy-MM-dd"),r=this.pipe.transform(this.EndDateFilter,"yyyy-MM-dd");this.terminalReportService.getTerminalSaleReport(t.userId,e,r).subscribe()}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(o.Qsj),o.Y36(Z))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-terminal-report"]],decls:76,vars:18,consts:[[1,"mt-2","mr-3","ml-3"],["label","Terminal barcode report"],[1,"pt-1","d-flex"],[1,"col-3"],["appearance","fill"],["matInput","",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],[3,"ngModel","ngModelChange"],["picker",""],["picker1",""],["mat-button","","color","accent",2,"font-size","20px",3,"click"],[1,""],["matSort","",1,"table","table-bordered","table-sm","m-3",2,"border","none !important","height","50px","overflow","scroll"],["mat-sort-header","terminal_pin"],["mat-sort-header","total"],["mat-sort-header","prize_value"],[4,"ngFor","ngForOf"],["label","Terminal sale report"],["matSort","",1,"table","table-bordered","table-sm",2,"border","none !important","height","50px","overflow","scroll"],["mat-sort-header","commission"],["mat-sort-header","ntp"]],template:function(t,e){if(1&t&&(o.TgZ(0,"mat-tab-group",0),o.TgZ(1,"mat-tab",1),o.TgZ(2,"div",2),o.TgZ(3,"div",3),o.TgZ(4,"mat-form-field",4),o.TgZ(5,"mat-label"),o._uU(6,"Start date"),o.qZA(),o.TgZ(7,"input",5),o.NdJ("ngModelChange",function(t){return e.StartDateFilter=t}),o.qZA(),o._UZ(8,"mat-datepicker-toggle",6),o.TgZ(9,"mat-datepicker",7,8),o.NdJ("ngModelChange",function(t){return e.StartDateFilter=t}),o.qZA(),o.qZA(),o.qZA(),o.TgZ(11,"div",3),o.TgZ(12,"mat-form-field",4),o.TgZ(13,"mat-label"),o._uU(14,"End date"),o.qZA(),o.TgZ(15,"input",5),o.NdJ("ngModelChange",function(t){return e.EndDateFilter=t}),o.qZA(),o._UZ(16,"mat-datepicker-toggle",6),o.TgZ(17,"mat-datepicker",7,9),o.NdJ("ngModelChange",function(t){return e.EndDateFilter=t}),o.qZA(),o.qZA(),o.qZA(),o.TgZ(19,"button",10),o.NdJ("click",function(){return e.getTerminalBarcodeReport()}),o._uU(20,"Search"),o.qZA(),o.qZA(),o.TgZ(21,"div",11),o.TgZ(22,"table",12),o.TgZ(23,"thead"),o.TgZ(24,"tr"),o.TgZ(25,"th",13),o._uU(26,"Baarcode"),o.qZA(),o.TgZ(27,"th",13),o._uU(28,"Draw Time"),o.qZA(),o.TgZ(29,"th",13),o._uU(30,"Quantity"),o.qZA(),o.TgZ(31,"th",14),o._uU(32,"Amount"),o.qZA(),o.TgZ(33,"th",15),o._uU(34,"Prize"),o.qZA(),o._UZ(35,"th"),o.qZA(),o.qZA(),o.TgZ(36,"tbody"),o.YNc(37,f,11,5,"tr",16),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(38,"mat-tab",17),o.TgZ(39,"div",2),o.TgZ(40,"div",3),o.TgZ(41,"mat-form-field",4),o.TgZ(42,"mat-label"),o._uU(43,"Start date"),o.qZA(),o.TgZ(44,"input",5),o.NdJ("ngModelChange",function(t){return e.StartDateFilter=t}),o.qZA(),o._UZ(45,"mat-datepicker-toggle",6),o.TgZ(46,"mat-datepicker",7,8),o.NdJ("ngModelChange",function(t){return e.StartDateFilter=t}),o.qZA(),o.qZA(),o.qZA(),o.TgZ(48,"div",3),o.TgZ(49,"mat-form-field",4),o.TgZ(50,"mat-label"),o._uU(51,"End date"),o.qZA(),o.TgZ(52,"input",5),o.NdJ("ngModelChange",function(t){return e.EndDateFilter=t}),o.qZA(),o._UZ(53,"mat-datepicker-toggle",6),o.TgZ(54,"mat-datepicker",7,9),o.NdJ("ngModelChange",function(t){return e.EndDateFilter=t}),o.qZA(),o.qZA(),o.qZA(),o.TgZ(56,"button",10),o.NdJ("click",function(){return e.getTerminalSaleReport()}),o._uU(57,"Search"),o.qZA(),o.qZA(),o.TgZ(58,"table",18),o.TgZ(59,"thead"),o.TgZ(60,"tr"),o.TgZ(61,"th",13),o._uU(62,"Terminal Id"),o.qZA(),o.TgZ(63,"th",13),o._uU(64,"Stokiest Name"),o.qZA(),o.TgZ(65,"th",14),o._uU(66,"Total"),o.qZA(),o.TgZ(67,"th",19),o._uU(68,"Commission"),o.qZA(),o.TgZ(69,"th",15),o._uU(70,"Prize"),o.qZA(),o.TgZ(71,"th",20),o._uU(72,"NTP"),o.qZA(),o._UZ(73,"th"),o.qZA(),o.qZA(),o.TgZ(74,"tbody"),o.YNc(75,_,13,6,"tr",16),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&t){const t=o.MAs(10),r=o.MAs(18);o.xp6(7),o.Q6J("matDatepicker",t)("ngModel",e.StartDateFilter),o.xp6(1),o.Q6J("for",t),o.xp6(1),o.Q6J("ngModel",e.StartDateFilter),o.xp6(6),o.Q6J("matDatepicker",r)("ngModel",e.EndDateFilter),o.xp6(1),o.Q6J("for",r),o.xp6(1),o.Q6J("ngModel",e.EndDateFilter),o.xp6(20),o.Q6J("ngForOf",e.terminalReportData),o.xp6(7),o.Q6J("matDatepicker",t)("ngModel",e.StartDateFilter),o.xp6(1),o.Q6J("for",t),o.xp6(1),o.Q6J("ngModel",e.StartDateFilter),o.xp6(6),o.Q6J("matDatepicker",r)("ngModel",e.EndDateFilter),o.xp6(1),o.Q6J("for",r),o.xp6(1),o.Q6J("ngModel",e.EndDateFilter),o.xp6(21),o.Q6J("ngForOf",e.terminalSaleReportData)}},directives:[m.SP,m.uX,h.KE,h.hX,T.Nt,A.hl,q.Fj,q.JJ,q.On,A.nW,h.R9,A.Mq,b.lW,S.YE,S.nU,a.sg],styles:[""]}),t})()}];let D=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[i.Bz.forChild(R)],i.Bz]}),t})();var U=r(52030),x=r(1887),M=r(77154),v=r(22797),F=r(79572),J=r(97624),y=r(48158),k=r(4333),E=r(47217),N=r(87064);let O=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[a.ez,D,a.ez,U.q,m.Nh,x.q,M.o9,v.QW,q.u5,q.UX,F.rP,S.JX,J.aE,J.bz,y.At,k.UU,E.g,A.FA,T.c,q.u5,N.XK,N.si]]}),t})()}}]);